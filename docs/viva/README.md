# ğŸ“š KTX Delivery - Báº£o Vá»‡ Äá»“ Ãn - Chá»‰ Má»¥c TÃ i Liá»‡u (Viva Documentation Index)

> **Má»¥c Ä‘Ã­ch**: Danh má»¥c toÃ n bá»™ tÃ i liá»‡u chuáº©n bá»‹ cho báº£o vá»‡ Ä‘á»“ Ã¡n (Viva/Oral Defense).  
> **Láº§n Cáº­p Nháº­t Cuá»‘i CÃ¹ng**: 30 thÃ¡ng 1, 2026

---

## ğŸ“‹ Bá»˜ TÃ€I LIá»†U (Documentation Set)

### Giai Äoáº¡n 0: Tham Chiáº¿u Codebase (Phase 0: Codebase Reference)
| # | Document | MÃ´ Táº£ (Description) | Sá»‘ DÃ²ng (Pages) |
|---|----------|---------------------|------------------|
| 00 | [00_CODEBASE_MAP.md](00_CODEBASE_MAP.md) | SÆ¡ Ä‘á»“ cáº¥u trÃºc codebase toÃ n bá»™ (Full codebase structure map) | ~1200 dÃ²ng |

### Giai Äoáº¡n 1: Ná»n Táº£ng Dá»± Ãn (Phase 1: Project Foundation)
| # | Document | MÃ´ Táº£ (Description) | Chá»§ Äá» ChÃ­nh (Key Topics) |
|---|----------|---------------------|---------------------------|
| 01 | [01_PROJECT_OVERVIEW.md](01_PROJECT_OVERVIEW.md) | Giá»›i thiá»‡u & má»¥c tiÃªu dá»± Ã¡n (Project introduction & goals) | Váº¥n Ä‘á», Giáº£i phÃ¡p, Pháº¡m vi (Problem, Solution, Scope) |
| 02 | [02_TECHSTACK.md](02_TECHSTACK.md) | Giáº£i thÃ­ch bá»™ cÃ´ng nghá»‡ (Technology stack explanation) | Kotlin, NestJS, Firebase |
| 03 | [03_ARCHITECTURE.md](03_ARCHITECTURE.md) | Kiáº¿n trÃºc há»‡ thá»‘ng (System architecture) | MVVM, Clean Architecture |

### Giai Äoáº¡n 2: TÃ­nh NÄƒng & Luá»“ng Xá»­ LÃ½ (Phase 2: Features & Flows)
| # | Document | MÃ´ Táº£ (Description) | Chá»§ Äá» ChÃ­nh (Key Topics) |
|---|----------|---------------------|---------------------------|
| 04 | [04_FEATURES_BY_ROLE.md](04_FEATURES_BY_ROLE.md) | TÃ­nh nÄƒng theo vai trÃ² (Features per user role) | NgÆ°á»i mua, Chá»§ quÃ¡n, Shipper (Buyer, Seller, Shipper) |
| 05 | [05_MAIN_FLOWS.md](05_MAIN_FLOWS.md) | Luá»“ng ngÆ°á»i dÃ¹ng lÃµi (Core user journeys) | ÄÆ¡n hÃ ng, Thanh toÃ¡n, Giao hÃ ng (Order, Payment, Delivery) |

### Giai Äoáº¡n 3: PhÃ¢n TÃ­ch Ká»¹ Thuáº­t SÃ¢u (Phase 3: Technical Deep Dives)
| # | Document | MÃ´ Táº£ (Description) | Chá»§ Äá» ChÃ­nh (Key Topics) |
|---|----------|---------------------|---------------------------|
| 06 | [06_BUSINESS_LOGIC_DEEP_DIVE.md](06_BUSINESS_LOGIC_DEEP_DIVE.md) | Logic tÃ­nh nÄƒng phá»©c táº¡p (Complex feature logic) | ThÃ´ng bÃ¡o, GPS, Chat, Chatbot (Notifications, GPS, Chat, Chatbot) |
| 07 | [07_JETPACK_COMPOSE_VS_XML.md](07_JETPACK_COMPOSE_VS_XML.md) | Lá»±a chá»n UI framework (UI framework choice) | Khai bÃ¡o vs Má»‡nh lá»‡nh (Declarative vs Imperative) |
| 08 | [08_STATE_MANAGEMENT.md](08_STATE_MANAGEMENT.md) | Máº«u quáº£n lÃ½ tráº¡ng thÃ¡i (State handling patterns) | StateFlow, ViewModel, Compose |

### Giai Äoáº¡n 4: Báº£o Máº­t & Káº¿t Luáº­n (Phase 4: Security & Wrap-up)
| # | Document | MÃ´ Táº£ (Description) | Chá»§ Äá» ChÃ­nh (Key Topics) |
|---|----------|---------------------|---------------------------|
| 09 | [09_SECURITY_AND_PERMISSIONS.md](09_SECURITY_AND_PERMISSIONS.md) | MÃ´ hÃ¬nh báº£o máº­t (Security model) | XÃ¡c thá»±c, RBAC, Firestore Rules (Auth, RBAC, Firestore Rules) |
| 10 | [10_LIMITATIONS_AND_FUTURE_WORK.md](10_LIMITATIONS_AND_FUTURE_WORK.md) | Pháº¡m vi & cáº£i thiá»‡n (Scope & improvements) | Giá»›i háº¡n MVP, Kiá»ƒm tra, Roadmap (MVP limits, Testing, Roadmap) |

---

## ğŸ¯ Ká»ŠP THá»œI 1 PHÃšT - CÃ‚U TRáº¢ Lá»œI (1-MINUTE SPEAKING SCRIPTS)

Má»—i chá»§ Ä‘á» cÃ³ thá»ƒ tráº£ lá»i trong 1 phÃºt (Each topic can be answered in 1 minute):

### Tá»•ng Quan Dá»± Ãn (Project Overview) (01)
> "KTX Delivery lÃ  á»©ng dá»¥ng giao Ä‘á»“ Äƒn cho sinh viÃªn KTX. CÃ³ 3 vai trÃ²: KhÃ¡ch hÃ ng Ä‘áº·t hÃ ng, Chá»§ quÃ¡n quáº£n lÃ½ cá»­a hÃ ng, Shipper giao hÃ ng. Bá»™ cÃ´ng nghá»‡: Android Kotlin vá»›i Jetpack Compose, backend NestJS trÃªn Firebase Cloud Functions, cÆ¡ sá»Ÿ dá»¯ liá»‡u Firestore." (KTX Delivery is a food delivery app for dormitory students. Has 3 roles: Customer orders food, Owner manages shop, Shipper delivers. Tech: Android Kotlin with Jetpack Compose, NestJS backend on Firebase Cloud Functions, Firestore database.)

### Kiáº¿n TrÃºc (Architecture) (03)
> "á»¨ng dá»¥ng dÃ¹ng kiáº¿n trÃºc MVVM: View (Compose UI) - ViewModel (logic kinh doanh, tráº¡ng thÃ¡i) - Model (Repository + API). StateFlow Ä‘á»ƒ quáº£n lÃ½ tráº¡ng thÃ¡i, ViewModel tá»“n táº¡i qua thay Ä‘á»•i cáº¥u hÃ¬nh. Backend dÃ¹ng kiáº¿n trÃºc phÃ¢n táº§ng: Controller - Service - Repository." (App uses MVVM architecture: View (Compose UI) - ViewModel (business logic, state) - Model (Repository + API). StateFlow for state management, ViewModel survives configuration change. Backend uses layered architecture: Controller - Service - Repository.)

### Quáº£n LÃ½ Tráº¡ng ThÃ¡i (State Management) (08)
> "DÃ¹ng MutableStateFlow riÃªng tÆ° trong ViewModel, phÆ¡i bÃ y StateFlow cÃ´ng khai cho UI. UI collectAsState() Ä‘á»ƒ quan sÃ¡t. Khi tráº¡ng thÃ¡i thay Ä‘á»•i, Compose tá»± Ä‘á»™ng recompose cÃ¡c thÃ nh pháº§n bá»‹ áº£nh hÆ°á»Ÿng. Sealed class cho type-safe UI states nhÆ° Loading, Success, Error." (Use private MutableStateFlow in ViewModel, expose public StateFlow to UI. UI collectAsState() to observe. When state changes, Compose auto-recomposes affected components. Sealed class for type-safe UI states like Loading, Success, Error.)

### Báº£o Máº­t (Security) (09)
> "XÃ¡c thá»±c qua Firebase Auth (Email + Google). Token JWT gá»­i trong header má»i yÃªu cáº§u. Backend xÃ¡c minh báº±ng Firebase Admin SDK. Kiá»ƒm soÃ¡t truy cáº­p dá»±a trÃªn vai trÃ² (RBAC) vá»›i RolesGuard. Quy táº¯c Báº£o Máº­t Firestore tá»« chá»‘i theo máº·c Ä‘á»‹nh, kiá»ƒm tra quyá»n sá»Ÿ há»¯u." (Authentication via Firebase Auth (Email + Google). JWT token sent in header of every request. Backend verifies with Firebase Admin SDK. Role-based access control with RolesGuard. Firestore Security Rules deny-by-default, check ownership.)

### GPS/Vá»‹ TrÃ­ (GPS/Location) (06)
> "DÃ¹ng FusedLocationProviderClient vá»›i LocationRequest. Cáº­p nháº­t má»—i 5 giÃ¢y, khoáº£ng cÃ¡ch tá»‘i thiá»ƒu 5 mÃ©t. LocationHelper tráº£ vá» Flow<Location> qua callbackFlow. GpsViewModel thu tháº­p vÃ  gá»­i lÃªn backend. Shipper cáº§n dá»‹ch vá»¥ foreground Ä‘á»ƒ theo dÃµi khi á»©ng dá»¥ng minimize." (Use FusedLocationProviderClient with LocationRequest. Update every 5 seconds, minimum 5 meters. LocationHelper returns Flow<Location> via callbackFlow. GpsViewModel collects and sends to backend. Shipper needs foreground service for tracking when app is minimized.)

---

## âœ… DANH SÃCH KIá»‚M TRA CÃ‚U Há»I VIVA (VIVA QUESTION CHECKLIST)

NhÃ³m nÃªn luyá»‡n táº­p tráº£ lá»i cÃ¡c cÃ¢u há»i sau (Team should rehearse the following questions):

### CÃ¢u Há»i Ká»¹ Thuáº­t (Technical Questions)

- [ ] **Q1**: Táº¡i sao chá»n Jetpack Compose thay vÃ¬ XML?
- [ ] **Q2**: StateFlow khÃ¡c gÃ¬ LiveData?
- [ ] **Q3**: MVVM pattern hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o trong app?
- [ ] **Q4**: Firestore Security Rules báº£o vá»‡ data nhÆ° tháº¿ nÃ o?
- [ ] **Q5**: GPS tracking hoáº¡t Ä‘á»™ng ra sao? Battery optimization?
- [ ] **Q6**: FCM notification flow tá»« backend Ä‘áº¿n mobile?
- [ ] **Q7**: Order status machine - cÃ¡c transition há»£p lá»‡?
- [ ] **Q8**: LÃ m sao prevent user sá»­a order cá»§a ngÆ°á»i khÃ¡c?
- [ ] **Q9**: Chatbot AI sá»­ dá»¥ng model gÃ¬? Rate limiting?
- [ ] **Q10**: Táº¡i sao dÃ¹ng manual DI thay vÃ¬ Hilt?

### CÃ¢u Há»i Thiáº¿t Káº¿ (Design Questions)

- [ ] **Q11**: Táº¡i sao chá»n Firebase thay vÃ¬ tá»± build?
- [ ] **Q12**: Scalability - app handle Ä‘Æ°á»£c bao nhiÃªu users?
- [ ] **Q13**: Náº¿u cÃ³ thÃªm 1 thÃ¡ng, sáº½ lÃ m feature gÃ¬?
- [ ] **Q14**: Testing strategy? Coverage bao nhiÃªu?
- [ ] **Q15**: Offline mode cÃ³ Ä‘Æ°á»£c support khÃ´ng?

### CÃ¢u Há»i Theo Vai TrÃ² (Role-specific Questions)

- [ ] **Q16**: Customer journey tá»« browse Ä‘áº¿n nháº­n hÃ ng?
- [ ] **Q17**: Owner quáº£n lÃ½ shop nhÆ° tháº¿ nÃ o?
- [ ] **Q18**: Shipper trip lifecycle (create â†’ deliver)?
- [ ] **Q19**: Voucher validation flow?
- [ ] **Q20**: Payment methods Ä‘Æ°á»£c support?

---

## ğŸ“– THAM CHIáº¾U NHANH - CÃ‚UI TRáº¢ Lá»œI (QUICK REFERENCE ANSWERS)

### Q1: Táº¡i sao dÃ¹ng Compose? (Why Compose?)
- Google khuyáº¿n nghá»‹, hiá»‡n Ä‘áº¡i, Ã­t code hÆ¡n, type-safe (Google recommends, modern, less code, type-safe)
- State-driven UI phÃ¹ há»£p MVVM (State-driven UI fits MVVM)
- CÃ´ng cá»¥ tá»‘t hÆ¡n (Better tooling) (Preview, hot reload)

### Q2: StateFlow khÃ¡c gÃ¬ LiveData? (StateFlow vs LiveData)
- StateFlow: Dá»±a trÃªn Kotlin Flow, khÃ´ng cáº§n Lifecycle owner (Kotlin Flow-based, no Lifecycle owner needed)
- LiveData: Android-specific, tá»± Ä‘á»™ng táº¡m dá»«ng (auto-pause)
- Dá»± Ã¡n dÃ¹ng StateFlow Ä‘á»ƒ thá»‘ng nháº¥t (Project uses StateFlow for consistency)

### Q5: GPS tracking nhÆ° tháº¿ nÃ o? (GPS tracking)
- FusedLocationProviderClient (Google Play Services)
- Khoáº£ng 5 giÃ¢y, khoáº£ng cÃ¡ch tá»‘i thiá»ƒu 5 mÃ©t (5-second interval, 5-meter minimum distance)
- Máº«u callbackFlow, thu tháº­p trong ViewModel (callbackFlow pattern, collect in ViewModel)
- Cáº§n Dá»‹ch vá»¥ Foreground cho theo dÃµi ná»n (Foreground Service for background tracking)

### Q7: Chuyá»ƒn Ä‘á»•i tráº¡ng thÃ¡i Ä‘Æ¡n hÃ ng (Order transitions)
```
CHá»œ_Xá»¬_LÃ â†’ ÄÃƒ_XÃC_NHáº¬N â†’ CHUáº¨N_Bá»Š â†’ Sáº´N_SÃ€NG â†’ ÄANG_GIAO â†’ ÄÃƒ_GIAO
(PENDING â†’ CONFIRMED â†’ PREPARING â†’ READY â†’ SHIPPING â†’ DELIVERED)
   â†“          â†“           â†“
ÄÃƒ_Há»¦Y (chá»‰ trÆ°á»›c READY) 
(CANCELLED - only before READY)
```

### Q11: Táº¡i sao dÃ¹ng Firebase? (Why Firebase?)
- Táº¥t cáº£ trong má»™t: XÃ¡c thá»±c, CÆ¡ sá»Ÿ dá»¯ liá»‡u, LÆ°u trá»¯, Hosting, Push (All-in-one: Auth, DB, Storage, Hosting, Push)
- Tier miá»…n phÃ­ Ä‘á»§ cho MVP (Free tier enough for MVP)
- Tá»± Ä‘á»™ng má»Ÿ rá»™ng (Auto-scale)
- SDK tá»‘t cho Android (Good SDK for Android)

---

## ğŸš€ Máº¸O THUYáº¾T TRÃŒNH (PRESENTATION TIPS)

1. **Má»Ÿ Ä‘áº§u** (Opening): Demo á»©ng dá»¥ng trÆ°á»›c, giáº£i thÃ­ch ká»¹ thuáº­t sau (Demo app first, explain tech after)
2. **Kiáº¿n trÃºc** (Architecture): Váº½ sÆ¡ Ä‘á»“ Ä‘Æ¡n giáº£n trÃªn báº£ng tráº¯ng (Draw simple diagram on whiteboard)
3. **MÃ£** (Code): Má»Ÿ IDE, hiá»ƒn thá»‹ mÃ£ thá»±c táº¿ khi Ä‘Æ°á»£c há»i (Open IDE, show actual code when asked)
4. **ThÃ nh tháº­t** (Honest): NÃªu rÃµ giá»›i háº¡n, Ä‘á»«ng quáº£ng cÃ¡o quÃ¡ (State limitations clearly, don't oversell)
5. **TÆ°Æ¡ng lai** (Future): CÃ³ lá»™ trÃ¬nh rÃµ rÃ ng náº¿u Ä‘Æ°á»£c há»i (Have clear roadmap if asked)

---

## ğŸ“ Vá»Š TRÃ Tá»†P (FILE LOCATIONS)

```
MobileProject/
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ viva/
â”‚       â”œâ”€â”€ README.md                          â† YOU ARE HERE
â”‚       â”œâ”€â”€ 00_CODEBASE_MAP.md
â”‚       â”œâ”€â”€ 01_PROJECT_OVERVIEW.md
â”‚       â”œâ”€â”€ 02_TECHSTACK.md
â”‚       â”œâ”€â”€ 03_ARCHITECTURE.md
â”‚       â”œâ”€â”€ 04_FEATURES_BY_ROLE.md
â”‚       â”œâ”€â”€ 05_MAIN_FLOWS.md
â”‚       â”œâ”€â”€ 06_BUSINESS_LOGIC_DEEP_DIVE.md
â”‚       â”œâ”€â”€ 07_JETPACK_COMPOSE_VS_XML.md
â”‚       â”œâ”€â”€ 08_STATE_MANAGEMENT.md
â”‚       â”œâ”€â”€ 09_SECURITY_AND_PERMISSIONS.md
â”‚       â””â”€â”€ 10_LIMITATIONS_AND_FUTURE_WORK.md
â”œâ”€â”€ FoodApp/                                   â† Android source
â”œâ”€â”€ Backend/                                   â† NestJS source
â””â”€â”€ Admin/                                     â† React Admin panel
```

---

## ğŸ“Š THá»NG KÃŠ (STATS)

| Chá»‰ Sá»‘ (Metric) | GiÃ¡ Trá»‹ (Value) |
|--------|--------|
| Tá»•ng tÃ i liá»‡u (Total docs) | 11 tá»‡p (files) |
| Tá»•ng dÃ²ng (Total lines) | ~5000+ |
| Backend tests | 26 bá»™ (suites), 425+ tests |
| Vai trÃ² (Roles) | 4 (KhÃ¡ch hÃ ng, Chá»§ quÃ¡n, Shipper, Admin) (Customer, Owner, Shipper, Admin) |
| Tech stack | Kotlin + NestJS + Firebase |

---

**ChÃºc báº¡n thÃ nh cÃ´ng vá»›i viva! ğŸ“ (Good luck with the viva! ğŸ“)**
